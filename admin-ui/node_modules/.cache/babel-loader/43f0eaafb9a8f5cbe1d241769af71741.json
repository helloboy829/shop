{"remainingRequest":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\src\\views\\mall\\order.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\src\\views\\mall\\order.vue","mtime":1741918744984},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\babel.config.js","mtime":1741918744622},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741918921836},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1741918936941},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741918921836},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1741918940891}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9jb2RlaWRlYS9iaXNoZTQvZHRzLXNob3AvYWRtaW4tdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnZhciBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkQ6L2NvZGVpZGVhL2Jpc2hlNC9kdHMtc2hvcC9hZG1pbi11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkLmpzIikpOwp2YXIgX29yZGVyID0gcmVxdWlyZSgiQC9hcGkvYnVzaW5lc3Mvb3JkZXIiKTsKdmFyIF9QYWdpbmF0aW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2NvbXBvbmVudHMvUGFnaW5hdGlvbiIpKTsKdmFyIF9wZXJtaXNzaW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3V0aWxzL3Blcm1pc3Npb24iKSk7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgovLyBTZWNvbmRhcnkgcGFja2FnZSBiYXNlZCBvbiBlbC1wYWdpbmF0aW9uCi8vIOadg+mZkOWIpOaWreWHveaVsAoKdmFyIHN0YXR1c01hcCA9IHsKICAxMDE6ICfmnKrku5jmrL4nLAogIDEwMjogJ+eUqOaIt+WPlua2iCcsCiAgMTAzOiAn57O757uf5Y+W5raIJywKICAyMDE6ICflt7Lku5jmrL4nLAogIDIwMjogJ+eUs+ivt+mAgOasvicsCiAgMjAzOiAn5bey6YCA5qy+JywKICAzMDE6ICflt7Llj5HotKcnLAogIDQwMTogJ+eUqOaIt+aUtui0pycsCiAgNDAyOiAn57O757uf5pS26LSnJwp9Owp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogJ09yZGVyJywKICBjb21wb25lbnRzOiB7CiAgICBQYWdpbmF0aW9uOiBfUGFnaW5hdGlvbi5kZWZhdWx0CiAgfSwKICBmaWx0ZXJzOiB7CiAgICBvcmRlclN0YXR1c0ZpbHRlcjogZnVuY3Rpb24gb3JkZXJTdGF0dXNGaWx0ZXIoc3RhdHVzKSB7CiAgICAgIHJldHVybiBzdGF0dXNNYXBbc3RhdHVzXTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiB1bmRlZmluZWQsCiAgICAgIHRvdGFsOiAwLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgc2hpcENoYW5uZWxMaXN0OiBbXSwKICAgICAgbGlzdFF1ZXJ5OiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMjAsCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBuYW1lOiB1bmRlZmluZWQsCiAgICAgICAgb3JkZXJTdGF0dXNBcnJheTogW10sCiAgICAgICAgc29ydDogJ2FkZF90aW1lJywKICAgICAgICBvcmRlcjogJ2Rlc2MnCiAgICAgIH0sCiAgICAgIHN0YXR1c01hcDogc3RhdHVzTWFwLAogICAgICBvcmRlckRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBvcmRlckRldGFpbDogewogICAgICAgIG9yZGVyOiB7fSwKICAgICAgICB1c2VyOiB7fSwKICAgICAgICBvcmRlckdvb2RzOiBbXQogICAgICB9LAogICAgICBzaGlwRm9ybTogewogICAgICAgIG9yZGVySWQ6IHVuZGVmaW5lZCwKICAgICAgICBzaGlwQ2hhbm5lbDogdW5kZWZpbmVkLAogICAgICAgIHNoaXBTbjogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIHNoaXBEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgcmVmdW5kRm9ybTogewogICAgICAgIG9yZGVySWQ6IHVuZGVmaW5lZCwKICAgICAgICByZWZ1bmRNb25leTogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIHJlZnVuZERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkb3dubG9hZExvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgdGhpcy5nZXRMaXN0U2hpcENoYW5uZWwoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoZWNrUGVybWlzc2lvbjogX3Blcm1pc3Npb24uZGVmYXVsdCwKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlOwogICAgICAoMCwgX29yZGVyLmxpc3RPcmRlcikodGhpcy5saXN0UXVlcnkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5pdGVtczsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEuZGF0YS50b3RhbDsKICAgICAgICBfdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMubGlzdCA9IFtdOwogICAgICAgIF90aGlzLnRvdGFsID0gMDsKICAgICAgICBfdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRMaXN0U2hpcENoYW5uZWw6IGZ1bmN0aW9uIGdldExpc3RTaGlwQ2hhbm5lbCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgICgwLCBfb3JkZXIubGlzdFNoaXBDaGFubmVsKSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnNoaXBDaGFubmVsTGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5zaGlwQ2hhbm5lbExpc3Q7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUZpbHRlcjogZnVuY3Rpb24gaGFuZGxlRmlsdGVyKCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgaGFuZGxlRGV0YWlsOiBmdW5jdGlvbiBoYW5kbGVEZXRhaWwocm93KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICAoMCwgX29yZGVyLmRldGFpbE9yZGVyKShyb3cuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLm9yZGVyRGV0YWlsID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICB9KTsKICAgICAgdGhpcy5vcmRlckRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZVNoaXA6IGZ1bmN0aW9uIGhhbmRsZVNoaXAocm93KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLnNoaXBGb3JtLm9yZGVySWQgPSByb3cuaWQ7CiAgICAgIHRoaXMuc2hpcEZvcm0uc2hpcENoYW5uZWwgPSByb3cuc2hpcENoYW5uZWw7CiAgICAgIHRoaXMuc2hpcEZvcm0uc2hpcFNuID0gcm93LnNoaXBTbjsKICAgICAgdGhpcy5zaGlwRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuJHJlZnNbJ3NoaXBGb3JtJ10uY2xlYXJWYWxpZGF0ZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBjb25maXJtU2hpcDogZnVuY3Rpb24gY29uZmlybVNoaXAoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWydzaGlwRm9ybSddLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgKDAsIF9vcmRlci5zaGlwT3JkZXIpKF90aGlzNS5zaGlwRm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXM1LnNoaXBEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzNS4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn56Gu6K6k5Y+R6LSn5oiQ5YqfJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXM1LmdldExpc3QoKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBfdGhpczUuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgICAgdGl0bGU6ICflpLHotKUnLAogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEuZXJybXNnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVSZWZ1bmQ6IGZ1bmN0aW9uIGhhbmRsZVJlZnVuZChyb3cpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHRoaXMucmVmdW5kRm9ybS5vcmRlcklkID0gcm93LmlkOwogICAgICB0aGlzLnJlZnVuZEZvcm0ucmVmdW5kTW9uZXkgPSByb3cuYWN0dWFsUHJpY2U7CiAgICAgIHRoaXMucmVmdW5kRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczYuJHJlZnNbJ3JlZnVuZEZvcm0nXS5jbGVhclZhbGlkYXRlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGNvbmZpcm1SZWZ1bmQ6IGZ1bmN0aW9uIGNvbmZpcm1SZWZ1bmQoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWydyZWZ1bmRGb3JtJ10udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAoMCwgX29yZGVyLnJlZnVuZE9yZGVyKShfdGhpczcucmVmdW5kRm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXM3LnJlZnVuZERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXM3LiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfnoa7orqTpgIDmrL7miJDlip8nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpczcuZ2V0TGlzdCgpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzNy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgICB0aXRsZTogJ+Wksei0pScsCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5lcnJtc2cKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZURvd25sb2FkOiBmdW5jdGlvbiBoYW5kbGVEb3dubG9hZCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHRoaXMuZG93bmxvYWRMb2FkaW5nID0gdHJ1ZTsKICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgwLCBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZDIuZGVmYXVsdCkocmVxdWlyZSgnQC92ZW5kb3IvRXhwb3J0MkV4Y2VsJykpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChleGNlbCkgewogICAgICAgIHZhciB0SGVhZGVyID0gWyforqLljZVJRCcsICforqLljZXnvJblj7cnLCAn55So5oi3SUQnLCAn6K6i5Y2V54q25oCBJywgJ+aYr+WQpuWIoOmZpCcsICfmlLbotKfkuronLCAn5pS26LSn6IGU57O755S16K+dJywgJ+aUtui0p+WcsOWdgCddOwogICAgICAgIHZhciBmaWx0ZXJWYWwgPSBbJ2lkJywgJ29yZGVyU24nLCAndXNlcklkJywgJ29yZGVyU3RhdHVzJywgJ2lzRGVsZXRlJywgJ2NvbnNpZ25lZScsICdtb2JpbGUnLCAnYWRkcmVzcyddOwogICAgICAgIGV4Y2VsLmV4cG9ydF9qc29uX3RvX2V4Y2VsMih0SGVhZGVyLCBfdGhpczgubGlzdCwgZmlsdGVyVmFsLCAn6K6i5Y2V5L+h5oGvJyk7CiAgICAgICAgX3RoaXM4LmRvd25sb2FkTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["_order","require","_Pagination","_interopRequireDefault","_permission","statusMap","_default","exports","default","name","components","Pagination","filters","orderStatusFilter","status","data","list","undefined","total","listLoading","shipChannelList","listQuery","page","limit","id","orderStatusArray","sort","order","orderDialogVisible","orderDetail","user","orderGoods","shipForm","orderId","shipChannel","shipSn","shipDialogVisible","refundForm","refundMoney","refundDialogVisible","downloadLoading","created","getList","getListShipChannel","methods","checkPermission","_this","listOrder","then","response","items","catch","_this2","listShipChannel","handleFilter","handleDetail","row","_this3","detailOrder","handleShip","_this4","$nextTick","$refs","clearValidate","confirmShip","_this5","validate","valid","shipOrder","$notify","success","title","message","error","errmsg","handleRefund","_this6","actualPrice","confirmRefund","_this7","refundOrder","handleDownload","_this8","Promise","resolve","_interopRequireWildcard2","excel","tHeader","filterVal","export_json_to_excel2"],"sources":["src/views/mall/order.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n\r\n    <!-- 查询和其他操作 -->\r\n    <div class=\"filter-container\">\r\n      <el-input v-model=\"listQuery.userId\" clearable size=\"mini\" class=\"filter-item\" style=\"width: 200px;\" placeholder=\"请输入用户ID\"/>\r\n      <el-input v-model=\"listQuery.orderSn\" clearable size=\"mini\" class=\"filter-item\" style=\"width: 200px;\" placeholder=\"请输入订单编号\"/>\r\n      <el-select v-model=\"listQuery.orderStatusArray\" multiple size=\"mini\" style=\"width: 200px\" class=\"filter-item\" placeholder=\"请选择订单状态\">\r\n        <el-option v-for=\"(key, value) in statusMap\" :key=\"key\" :label=\"key\" :value=\"value\"/>\r\n      </el-select>\r\n      <el-button v-permission=\"['GET /admin/order/list']\" size=\"mini\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">查找</el-button>\r\n      <el-button :loading=\"downloadLoading\" size=\"mini\" class=\"filter-item\" type=\"warning\" icon=\"el-icon-download\" @click=\"handleDownload\">导出</el-button>\r\n    </div>\r\n\r\n    <!-- 查询结果 -->\r\n    <el-table v-loading=\"listLoading\" :data=\"list\" size=\"small\" element-loading-text=\"正在查询中。。。\" border fit highlight-current-row>\r\n\r\n      <el-table-column align=\"center\" min-width=\"100\" label=\"订单编号\" prop=\"orderSn\" sortable/>\r\n\r\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"用户ID\" prop=\"userId\"/>\r\n\r\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"订单状态\" prop=\"orderStatus\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag>{{ scope.row.orderStatus | orderStatusFilter }}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"订单金额\" prop=\"orderPrice\"/>\r\n\r\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"支付金额\" prop=\"actualPrice\"/>\r\n\r\n      <el-table-column align=\"center\" min-width=\"120px\" label=\"支付时间\" prop=\"payTime\"/>\r\n\r\n      <el-table-column align=\"center\" min-width=\"120px\" label=\"物流单号\" prop=\"shipSn\"/>\r\n\r\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"物流渠道\" prop=\"shipChannel\"/>\r\n\r\n      <el-table-column align=\"center\" label=\"操作\" min-width=\"150px\" class-name=\"small-padding fixed-width\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button v-permission=\"['GET /admin/order/detail']\" type=\"primary\" size=\"mini\" @click=\"handleDetail(scope.row)\">详情</el-button>\r\n          <el-button v-permission=\"['POST /admin/order/ship']\" v-if=\"scope.row.orderStatus==201\" type=\"primary\" size=\"mini\" @click=\"handleShip(scope.row)\">发货</el-button>\r\n          <el-button v-permission=\"['POST /admin/order/refund']\" v-if=\"scope.row.orderStatus==202\" type=\"primary\" size=\"mini\" @click=\"handleRefund(scope.row)\">退款</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\r\n\r\n    <!-- 订单详情对话框 -->\r\n    <el-dialog :visible.sync=\"orderDialogVisible\" title=\"订单详情\" width=\"800\">\r\n      <el-form :data=\"orderDetail\" label-position=\"left\">\r\n        <el-form-item label=\"订单编号\">\r\n          <span>{{ orderDetail.order.orderSn }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"订单状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag>{{ scope.order.orderStatus | orderStatusFilter }}</el-tag>\r\n          </template>\r\n        </el-form-item>\r\n        <el-form-item label=\"订单用户\">\r\n          <span>{{ orderDetail.user.nickname }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户留言\">\r\n          <span>{{ orderDetail.order.message }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"收货信息\">\r\n          <span>（收货人）{{ orderDetail.order.consignee }}</span>\r\n          <span>（手机号）{{ orderDetail.order.mobile }}</span>\r\n          <span>（地址）{{ orderDetail.order.address }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"商品信息\">\r\n          <el-table :data=\"orderDetail.orderGoods\" size=\"small\" border fit highlight-current-row>\r\n            <el-table-column align=\"center\" label=\"商品名称\" prop=\"goodsName\" />\r\n            <el-table-column align=\"center\" label=\"商品编号\" prop=\"goodsSn\" />\r\n            <el-table-column align=\"center\" label=\"货品规格\" prop=\"specifications\" />\r\n            <el-table-column align=\"center\" label=\"货品价格\" prop=\"price\" />\r\n            <el-table-column align=\"center\" label=\"货品数量\" prop=\"number\" />\r\n            <el-table-column align=\"center\" label=\"货品图片\" prop=\"picUrl\">\r\n              <template slot-scope=\"scope\">\r\n                <img :src=\"scope.row.picUrl\" width=\"40\">\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-form-item>\r\n        <el-form-item label=\"费用信息\">\r\n          <span>\r\n            (实际费用){{ orderDetail.order.actualPrice }}元 =\r\n            (商品总价){{ orderDetail.order.goodsPrice }}元 +\r\n            (快递费用){{ orderDetail.order.freightPrice }}元 -\r\n            (优惠减免){{ orderDetail.order.couponPrice }}元 -\r\n            (积分减免){{ orderDetail.order.integralPrice }}元\r\n          </span>\r\n        </el-form-item>\r\n        <el-form-item label=\"支付信息\">\r\n          <span>（支付渠道）微信支付</span>\r\n          <span>（支付时间）{{ orderDetail.order.payTime }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"快递信息\">\r\n          <span>（快递公司）{{ orderDetail.order.shipChannel }}</span>\r\n          <span>（快递单号）{{ orderDetail.order.shipSn }}</span>\r\n          <span>（发货时间）{{ orderDetail.order.shipTime }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"收货信息\">\r\n          <span>（确认收货时间）{{ orderDetail.order.confirmTime }}</span>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <!-- 发货对话框 -->\r\n    <el-dialog :visible.sync=\"shipDialogVisible\" title=\"发货\">\r\n      <el-form ref=\"shipForm\" :model=\"shipForm\" status-icon label-position=\"left\" label-width=\"100px\" style=\"width: 400px; margin-left:50px;\">\r\n        <el-form-item label=\"快递公司\" prop=\"shipChannel\">\r\n          <el-select v-model=\"shipForm.shipChannel\">\r\n            <el-option v-for=\"item in shipChannelList\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"/>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"快递编号\" prop=\"shipSn\">\r\n          <el-input v-model=\"shipForm.shipSn\"/>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"shipDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmShip\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 退款对话框 -->\r\n    <el-dialog :visible.sync=\"refundDialogVisible\" title=\"退款\">\r\n      <el-form ref=\"refundForm\" :model=\"refundForm\" status-icon label-position=\"left\" label-width=\"100px\" style=\"width: 400px; margin-left:50px;\">\r\n        <el-form-item label=\"退款金额\" prop=\"refundMoney\">\r\n          <el-input v-model=\"refundForm.refundMoney\" :disabled=\"true\"/>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"refundDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmRefund\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n\r\n</style>\r\n\r\n<script>\r\nimport { listOrder, shipOrder, refundOrder, detailOrder, listShipChannel } from '@/api/business/order'\r\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\r\nimport checkPermission from '@/utils/permission' // 权限判断函数\r\n\r\nconst statusMap = {\r\n  101: '未付款',\r\n  102: '用户取消',\r\n  103: '系统取消',\r\n  201: '已付款',\r\n  202: '申请退款',\r\n  203: '已退款',\r\n  301: '已发货',\r\n  401: '用户收货',\r\n  402: '系统收货'\r\n}\r\n\r\nexport default {\r\n  name: 'Order',\r\n  components: { Pagination },\r\n  filters: {\r\n    orderStatusFilter(status) {\r\n      return statusMap[status]\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      list: undefined,\r\n      total: 0,\r\n      listLoading: true,\r\n      shipChannelList: [],\r\n      listQuery: {\r\n        page: 1,\r\n        limit: 20,\r\n        id: undefined,\r\n        name: undefined,\r\n        orderStatusArray: [],\r\n        sort: 'add_time',\r\n        order: 'desc'\r\n      },\r\n      statusMap,\r\n      orderDialogVisible: false,\r\n      orderDetail: {\r\n        order: {},\r\n        user: {},\r\n        orderGoods: []\r\n      },\r\n      shipForm: {\r\n        orderId: undefined,\r\n        shipChannel: undefined,\r\n        shipSn: undefined\r\n      },\r\n      shipDialogVisible: false,\r\n      refundForm: {\r\n        orderId: undefined,\r\n        refundMoney: undefined\r\n      },\r\n      refundDialogVisible: false,\r\n      downloadLoading: false\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n    this.getListShipChannel()\r\n  },\r\n  methods: {\r\n    checkPermission,\r\n    getList() {\r\n      this.listLoading = true\r\n      listOrder(this.listQuery).then(response => {\r\n        this.list = response.data.data.items\r\n        this.total = response.data.data.total\r\n        this.listLoading = false\r\n      }).catch(() => {\r\n        this.list = []\r\n        this.total = 0\r\n        this.listLoading = false\r\n      })\r\n    },\r\n    getListShipChannel() {\r\n      listShipChannel().then(response => {\r\n        this.shipChannelList = response.data.data.shipChannelList\r\n      })\r\n    },\r\n    handleFilter() {\r\n      this.listQuery.page = 1\r\n      this.getList()\r\n    },\r\n    handleDetail(row) {\r\n      detailOrder(row.id).then(response => {\r\n        this.orderDetail = response.data.data\r\n      })\r\n      this.orderDialogVisible = true\r\n    },\r\n    handleShip(row) {\r\n      this.shipForm.orderId = row.id\r\n      this.shipForm.shipChannel = row.shipChannel\r\n      this.shipForm.shipSn = row.shipSn\r\n\r\n      this.shipDialogVisible = true\r\n      this.$nextTick(() => {\r\n        this.$refs['shipForm'].clearValidate()\r\n      })\r\n    },\r\n    confirmShip() {\r\n      this.$refs['shipForm'].validate((valid) => {\r\n        if (valid) {\r\n          shipOrder(this.shipForm).then(response => {\r\n            this.shipDialogVisible = false\r\n            this.$notify.success({\r\n              title: '成功',\r\n              message: '确认发货成功'\r\n            })\r\n            this.getList()\r\n          }).catch(response => {\r\n            this.$notify.error({\r\n              title: '失败',\r\n              message: response.data.errmsg\r\n            })\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleRefund(row) {\r\n      this.refundForm.orderId = row.id\r\n      this.refundForm.refundMoney = row.actualPrice\r\n\r\n      this.refundDialogVisible = true\r\n      this.$nextTick(() => {\r\n        this.$refs['refundForm'].clearValidate()\r\n      })\r\n    },\r\n    confirmRefund() {\r\n      this.$refs['refundForm'].validate((valid) => {\r\n        if (valid) {\r\n          refundOrder(this.refundForm).then(response => {\r\n            this.refundDialogVisible = false\r\n            this.$notify.success({\r\n              title: '成功',\r\n              message: '确认退款成功'\r\n            })\r\n            this.getList()\r\n          }).catch(response => {\r\n            this.$notify.error({\r\n              title: '失败',\r\n              message: response.data.errmsg\r\n            })\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleDownload() {\r\n      this.downloadLoading = true\r\n      import('@/vendor/Export2Excel').then(excel => {\r\n        const tHeader = ['订单ID', '订单编号', '用户ID', '订单状态', '是否删除', '收货人', '收货联系电话', '收货地址']\r\n        const filterVal = ['id', 'orderSn', 'userId', 'orderStatus', 'isDelete', 'consignee', 'mobile', 'address']\r\n        excel.export_json_to_excel2(tHeader, this.list, filterVal, '订单信息')\r\n        this.downloadLoading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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","ignoreList":[]}]}