{"remainingRequest":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\src\\views\\promotion\\articleEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\src\\views\\promotion\\articleEdit.vue","mtime":1741981759826},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\babel.config.js","mtime":1741918744622},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741918921836},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1741918936941},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741918921836},{"path":"D:\\codeidea\\bishe4\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1741918940891}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9jb2RlaWRlYS9iaXNoZTQvZHRzLXNob3AvYWRtaW4tdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnZhciBfYXJ0aWNsZSA9IHJlcXVpcmUoIkAvYXBpL2J1c2luZXNzL2FydGljbGUiKTsKdmFyIF9zdG9yYWdlID0gcmVxdWlyZSgiQC9hcGkvYnVzaW5lc3Mvc3RvcmFnZSIpOwp2YXIgX3RpbnltY2VWdWUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkB0aW55bWNlL3RpbnltY2UtdnVlIikpOwp2YXIgX2VsZW1lbnRVaSA9IHJlcXVpcmUoImVsZW1lbnQtdWkiKTsKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAnQXJ0aWNsZUVkaXQnLAogIGNvbXBvbmVudHM6IHsKICAgIEVkaXRvcjogX3RpbnltY2VWdWUuZGVmYXVsdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwbG9hZFBhdGg6IF9zdG9yYWdlLnVwbG9hZFBhdGgsCiAgICAgIGFydGljbGU6IHt9LAogICAgICBydWxlczogewogICAgICAgIHRpdGxlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5qCH6aKY5LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIGNvbnRlbnQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfkv6Hmga/lhoXlrrnkuI3og73kuLrnqbonLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgZWRpdG9ySW5pdDogewogICAgICAgIGxhbmd1YWdlOiAnemhfQ04nLAogICAgICAgIGNvbnZlcnRfdXJsczogZmFsc2UsCiAgICAgICAgcGx1Z2luczogWydhZHZsaXN0IGFuY2hvciBhdXRvbGluayBhdXRvc2F2ZSBjb2RlIGNvZGVzYW1wbGUgY29sb3JwaWNrZXIgY29sb3JwaWNrZXIgY29udGV4dG1lbnUgZGlyZWN0aW9uYWxpdHkgZW1vdGljb25zIGZ1bGxzY3JlZW4gaHIgaW1hZ2UgaW1hZ2V0b29scyBpbXBvcnRjc3MgaW5zZXJ0ZGF0ZXRpbWUgbGluayBsaXN0cyBtZWRpYSBub25icmVha2luZyBub25lZGl0YWJsZSBwYWdlYnJlYWsgcGFzdGUgcHJldmlldyBwcmludCBzYXZlIHNlYXJjaHJlcGxhY2Ugc3BlbGxjaGVja2VyIHRhYmZvY3VzIHRhYmxlIHRlbXBsYXRlIHRleHRjb2xvciB0ZXh0cGF0dGVybiB2aXN1YWxibG9ja3MgdmlzdWFsY2hhcnMgd29yZGNvdW50J10sCiAgICAgICAgdG9vbGJhcjogWydzZWFyY2hyZXBsYWNlIGJvbGQgaXRhbGljIHVuZGVybGluZSBzdHJpa2V0aHJvdWdoIGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IG91dGRlbnQgaW5kZW50ICBibG9ja3F1b3RlIHVuZG8gcmVkbyByZW1vdmVmb3JtYXQgc3Vic2NyaXB0IHN1cGVyc2NyaXB0IGNvZGUgY29kZXNhbXBsZScsICdociBidWxsaXN0IG51bWxpc3QgbGluayBpbWFnZSBjaGFybWFwIHByZXZpZXcgYW5jaG9yIHBhZ2VicmVhayBpbnNlcnRkYXRldGltZSBtZWRpYSB0YWJsZSBlbW90aWNvbnMgZm9yZWNvbG9yIGJhY2tjb2xvciBmdWxsc2NyZWVuJ10sCiAgICAgICAgaW1hZ2VzX3VwbG9hZF9oYW5kbGVyOiBmdW5jdGlvbiBpbWFnZXNfdXBsb2FkX2hhbmRsZXIoYmxvYkluZm8sIHN1Y2Nlc3MsIGZhaWx1cmUpIHsKICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgYmxvYkluZm8uYmxvYigpKTsKICAgICAgICAgICgwLCBfc3RvcmFnZS5jcmVhdGVTdG9yYWdlKShmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIHN1Y2Nlc3MocmVzLmRhdGEuZGF0YS51cmwpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmYWlsdXJlKCfkuIrkvKDlpLHotKXvvIzor7fph43mlrDkuIrkvKAnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoZWFkZXJzOiBmdW5jdGlvbiBoZWFkZXJzKCkgewogICAgICByZXR1cm4gewogICAgICAgICdYLUR0cy1BZG1pbi1Ub2tlbic6ICgwLCBfYXV0aC5nZXRUb2tlbikoKQogICAgICB9OwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmlkID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGFydGljbGVJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgICAoMCwgX2FydGljbGUuZGV0YWlsQXJ0aWNsZSkoYXJ0aWNsZUlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmFydGljbGUgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUNhbmNlbDogZnVuY3Rpb24gaGFuZGxlQ2FuY2VsKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9wcm9tb3Rpb24vYXJ0aWNsZUxpc3QnCiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIGhhbmRsZUVkaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICAoMCwgX2FydGljbGUuZWRpdEFydGljbGUpKHRoaXMuYXJ0aWNsZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip8nCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL3Byb21vdGlvbi9hcnRpY2xlTGlzdCcKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX2VsZW1lbnRVaS5NZXNzYWdlQm94LmFsZXJ0KCfkuJrliqHplJnor6/vvJonICsgcmVzcG9uc2UuZGF0YS5lcnJtc2csICforablkYonLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["_article","require","_storage","_tinymceVue","_interopRequireDefault","_elementUi","_auth","name","components","Editor","data","uploadPath","article","rules","title","required","message","trigger","content","editorInit","language","convert_urls","plugins","toolbar","images_upload_handler","blobInfo","success","failure","formData","FormData","append","blob","createStorage","then","res","url","catch","computed","headers","getToken","created","init","methods","_this","$route","query","id","articleId","detailArticle","response","handleCancel","$router","push","path","handleEdit","_this2","editArticle","$notify","MessageBox","alert","errmsg","confirmButtonText","type"],"sources":["src/views/promotion/articleEdit.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n\r\n    <el-card class=\"box-card\">\r\n      <h3>编辑信息公告</h3>\r\n      <el-form ref=\"article\" :rules=\"rules\" :model=\"article\" label-width=\"150px\">\r\n        <el-form-item label=\"类型\" prop=\"type\">\r\n          <el-radio-group v-model=\"article.type\">\r\n            <el-radio :label=\"'1'\">公告</el-radio>\r\n            <el-radio :label=\"'0'\">通知</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"标题\" prop=\"title\">\r\n          <el-input v-model=\"article.title\"/>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"内容\">\r\n          <editor :init=\"editorInit\" v-model=\"article.content\"/>\r\n        </el-form-item>\r\n\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <div class=\"op-container\">\r\n      <el-button @click=\"handleCancel\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleEdit\">更新</el-button>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.el-card {\r\n  margin-bottom: 10px;\r\n}\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n.input-new-keyword {\r\n  width: 90px;\r\n  margin-left: 10px;\r\n  vertical-align: bottom;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #20a0ff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 145px;\r\n  height: 145px;\r\n  display: block;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { detailArticle, editArticle } from '@/api/business/article'\r\nimport { createStorage, uploadPath } from '@/api/business/storage'\r\nimport Editor from '@tinymce/tinymce-vue'\r\nimport { MessageBox } from 'element-ui'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nexport default {\r\n  name: 'ArticleEdit',\r\n  components: { Editor },\r\n  data() {\r\n    return {\r\n      uploadPath,\r\n      article: {},\r\n      rules: {\r\n        title: [{ required: true, message: '标题不能为空', trigger: 'blur' }],\r\n        content: [{ required: true, message: '信息内容不能为空', trigger: 'blur' }]\r\n      },\r\n      editorInit: {\r\n        language: 'zh_CN',\r\n        convert_urls: false,\r\n        plugins: [\r\n          'advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount'\r\n        ],\r\n        toolbar: [\r\n          'searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample',\r\n          'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen'\r\n        ],\r\n        images_upload_handler: function(blobInfo, success, failure) {\r\n          const formData = new FormData()\r\n          formData.append('file', blobInfo.blob())\r\n          createStorage(formData)\r\n            .then(res => {\r\n              success(res.data.data.url)\r\n            })\r\n            .catch(() => {\r\n              failure('上传失败，请重新上传')\r\n            })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    headers() {\r\n      return {\r\n        'X-Dts-Admin-Token': getToken()\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init: function() {\r\n      if (this.$route.query.id == null) {\r\n        return\r\n      }\r\n      const articleId = this.$route.query.id\r\n      detailArticle(articleId).then(response => {\r\n        this.article = response.data.data\r\n      })\r\n    },\r\n    handleCancel: function() {\r\n      this.$router.push({ path: '/promotion/articleList' })\r\n    },\r\n    handleEdit: function() {\r\n      editArticle(this.article)\r\n        .then(response => {\r\n          this.$notify.success({\r\n            title: '成功',\r\n            message: '修改成功'\r\n          })\r\n          this.$router.push({ path: '/promotion/articleList' })\r\n        })\r\n        .catch(response => {\r\n          MessageBox.alert('业务错误：' + response.data.errmsg, '警告', {\r\n            confirmButtonText: '确定',\r\n            type: 'error'\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;;;;;;;AAqEA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,WAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,UAAA,GAAAJ,OAAA;AACA,IAAAK,KAAA,GAAAL,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iCAEA;EACAM,IAAA;EACAC,UAAA;IAAAC,MAAA,EAAAA;EAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA,EAAAA,mBAAA;MACAC,OAAA;MACAC,KAAA;QACAC,KAAA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAC,OAAA;UAAAH,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACAE,UAAA;QACAC,QAAA;QACAC,YAAA;QACAC,OAAA,GACA,gWACA;QACAC,OAAA,GACA,8KACA,qIACA;QACAC,qBAAA,WAAAA,sBAAAC,QAAA,EAAAC,OAAA,EAAAC,OAAA;UACA,IAAAC,QAAA,OAAAC,QAAA;UACAD,QAAA,CAAAE,MAAA,SAAAL,QAAA,CAAAM,IAAA;UACA,IAAAC,sBAAA,EAAAJ,QAAA,EACAK,IAAA,WAAAC,GAAA;YACAR,OAAA,CAAAQ,GAAA,CAAAxB,IAAA,CAAAA,IAAA,CAAAyB,GAAA;UACA,GACAC,KAAA;YACAT,OAAA;UACA;QACA;MACA;IACA;EACA;EACAU,QAAA;IACAC,OAAA,WAAAA,QAAA;MACA;QACA,yBAAAC,cAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,IAAA,WAAAA,KAAA;MAAA,IAAAE,KAAA;MACA,SAAAC,MAAA,CAAAC,KAAA,CAAAC,EAAA;QACA;MACA;MACA,IAAAC,SAAA,QAAAH,MAAA,CAAAC,KAAA,CAAAC,EAAA;MACA,IAAAE,sBAAA,EAAAD,SAAA,EAAAd,IAAA,WAAAgB,QAAA;QACAN,KAAA,CAAA/B,OAAA,GAAAqC,QAAA,CAAAvC,IAAA,CAAAA,IAAA;MACA;IACA;IACAwC,YAAA,WAAAA,aAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAAC,IAAA;MAAA;IACA;IACAC,UAAA,WAAAA,WAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,oBAAA,OAAA5C,OAAA,EACAqB,IAAA,WAAAgB,QAAA;QACAM,MAAA,CAAAE,OAAA,CAAA/B,OAAA;UACAZ,KAAA;UACAE,OAAA;QACA;QACAuC,MAAA,CAAAJ,OAAA,CAAAC,IAAA;UAAAC,IAAA;QAAA;MACA,GACAjB,KAAA,WAAAa,QAAA;QACAS,qBAAA,CAAAC,KAAA,WAAAV,QAAA,CAAAvC,IAAA,CAAAkD,MAAA;UACAC,iBAAA;UACAC,IAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}